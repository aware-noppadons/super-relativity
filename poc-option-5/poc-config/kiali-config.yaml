auth:
  strategy: anonymous

deployment:
  accessible_namespaces:
    - '**'
  view_only_mode: false

server:
  web_root: /kiali
  port: 20001
  address: "0.0.0.0"

external_services:
  custom_dashboards:
    enabled: true
  prometheus:
    url: "http://prometheus:9090"
    cache_duration: 10
    cache_enabled: true
    cache_expiration: 300
  grafana:
    enabled: true
    in_cluster_url: "http://grafana:3000"
    url: "http://localhost:3100"
    auth:
      type: none
  tracing:
    enabled: true
    in_cluster_url: "http://jaeger:16686"
    url: "http://localhost:16686"
    namespace_selector: true
    provider: "jaeger"
    use_grpc: false

istio_namespace: "istio-system"
istio_labels:
  app_label_name: "app"
  version_label_name: "version"

login_token:
  signing_key: "kiali-signing-key-poc"
  expiration_seconds: 86400

# Kiali features
kiali_feature_flags:
  certificates_information_indicators:
    enabled: true
    secrets:
      - "cacerts"
      - "istio-ca-secret"
  clustering:
    enabled: false
  disabled_features: []
  ui_defaults:
    graph:
      find_options:
        - description: "Find: slow edges (> 1s)"
          expression: "rt > 1000"
        - description: "Find: unhealthy nodes"
          expression: "! healthy"
        - description: "Find: unknown nodes"
          expression: "name = unknown"
        - description: "Find: nodes with high error rate"
          expression: "httpIn > 0.1"
      hide_options:
        - description: "Hide: healthy nodes"
          expression: "healthy"
        - description: "Hide: fast edges (< 100ms)"
          expression: "rt < 100"
        - description: "Hide: nodes with no traffic"
          expression: "httpIn = 0 and httpOut = 0"
      impl: "cy"
      settings:
        fontLabel: 12
        minFontBadge: 7
        minFontLabel: 10
      traffic_rates:
        - grpc
        - grpcRequest
        - http
        - httpRequest
        - tcp
        - tcpSent
    list:
      include_health: true
      include_istio_resources: true
      include_validations: true
      show_include_toggles: false
    metrics_per_refresh: "1m"
    namespaces: []
    refresh_interval: "15s"

health_config:
  rate:
    - namespace: ".*"
      kind: ".*"
      name: ".*"
      tolerance:
        - code: "^5\\d\\d$"
          degraded: 0
          failure: 10
        - code: "^4\\d\\d$"
          degraded: 10
          failure: 20
        - code: "^[1-3]\\d\\d$"
          degraded: 0
          failure: 0

# Custom metric aggregations
custom_dashboards:
  - name: "istio-mesh"
    title: "Istio Mesh Metrics"
    runtime: "Prometheus"
    discoverOn: "namespace"
    items:
      - chart:
          name: "Request Volume"
          unit: "ops"
          spans: 6
          metrics:
            - metricName: "istio_requests_total"
              displayName: "Request Rate"
          dataType: "rate"
      - chart:
          name: "Success Rate"
          unit: "%"
          spans: 6
          metrics:
            - metricName: "istio_requests_total"
              displayName: "Success Rate"
          dataType: "histogram"
